(this["webpackJsonpstar-wars"]=this["webpackJsonpstar-wars"]||[]).push([[0],{27:function(e,t,a){e.exports=a(42)},36:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),o=a(12),i=a(13),s=a(24),u=a(7),m=function(e){return{type:"SET_LOAD_FILMS_ERROR",payload:e}},d={filmsData:null,isLoading:!1,error:null,objectData:null,objectName:"films",objectAddData:null},p=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,f=[s.a],_=Object(i.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_FILMS":return Object(u.a)({},e,{error:null,filmsData:t.payload});case"START_LOADING":return Object(u.a)({},e,{isLoading:!0});case"STOP_LOADING":return Object(u.a)({},e,{isLoading:!1});case"SET_LOAD_FILMS_ERROR":return Object(u.a)({},e,{error:t.payload,filmsData:null});case"SAVE_OBJECT":return Object(u.a)({},e,{objectData:t.payload});case"SAVE_OBJECT_NAME":return Object(u.a)({},e,{objectName:t.payload});case"SAVE_OBJECT_ADDITIONAL_DATA":return Object(u.a)({},e,{objectAddData:Object(u.a)({},e.objectAddData,{},t.payload)});case"CLEAR_STATE":return Object(u.a)({},e,{objectData:null,objectAddData:null});default:return e}}),p(i.a.apply(void 0,f))),E=a(9),h=a(10),b=a(26),v=(a(36),a(11)),j=function(e){return e},O=Object(v.a)(j,(function(e){var t=e.filmsData;return t?t.sort((function(e,t){return e.episode_id-t.episode_id})):[]})),g=Object(v.a)(j,(function(e){return e.error})),A=Object(v.a)(j,(function(e){return e.isLoading})),D=Object(v.a)(j,(function(e){return e.objectData})),N=Object(v.a)(j,(function(e){return e.objectName})),y=Object(v.a)(j,(function(e){return e.objectAddData})),S=function(e){var t=e.split("/");return+t[t.length-2]},w={people:{show:["name","height","mass","hair_color","skin_color","eye_color","birth_year","gender"],load:["homeworld","films","species","vehicles","starships"]},planets:{show:["name","rotation_period","orbital_period","diameter","climate","gravity","terrain","surface_water","population"],load:["residents","films"]},films:{show:["title","episode_id","opening_crawl","director","producer","release_date"],load:["characters","planets","starships","vehicles","species"]},species:{show:["name","classification","designation","average_height","skin_colors","hair_colors","eye_colors","average_lifespan","language"],load:["homeworld","people","films"]},vehicles:{show:["name","model","manufacturer","cost_in_credits","length","max_atmosphering_speed","crew","passengers","cargo_capacity","consumables","vehicle_class"],load:["pilots","films"]},starships:{show:["name","model","manufacturer","cost_in_credits","length","max_atmosphering_speed","crew","passengers","cargo_capacity","consumables","hyperdrive_rating","MGLT","starship_class"],load:["pilots","films"]}},L=(a(37),function(e){var t=e.message;return r.a.createElement("div",{className:"error"},r.a.createElement("p",{className:"error__text"},t),r.a.createElement(E.b,{to:"/",className:"error__link"},"Go to Home"))});L.defaultProps={message:"Error occured"};a(39);var T=function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"lds-default"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},I=(a(40),function(e){return["residents","pilots","characters"].includes(e)?"people":"homeworld"===e?"planets":e}),C=function(e){var t=e.objectName,a=e.objectData,c=e.error,l=e.isLoading,o=e.loadObject,i=e.loadAddData,s=e.addData,u=e.clearStateData,m=Object(h.i)(),d=Object(h.g)();Object(n.useEffect)((function(){u(),o(m.objname,+m.id)}),[m.objname,+m.id]),Object(n.useEffect)((function(){a&&i(a,t,w[t].load)}),[a]);return r.a.createElement("div",{className:"object"},l&&r.a.createElement(T,null),c&&r.a.createElement(L,null),!l&&!c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"object__close",onClick:function(){d.push({pathname:"/films"})}},"close"),a&&w[t].show.map((function(e){return r.a.createElement("div",{className:"object__row"},r.a.createElement("p",{className:"object__row_title"},e,":"),r.a.createElement("p",{className:"object__row_text"},a[e]))})),r.a.createElement("div",null,!s&&r.a.createElement("p",{className:"loading object__row"},"Loading..."),s&&w[t].load.map((function(e){return r.a.createElement("div",{className:"object__row"},r.a.createElement("p",{className:"object__row_title"},e,":"),r.a.createElement("p",{className:"object__row_text"},s[e]&&s[e].length&&s[e].map((function(t){return r.a.createElement(E.b,{className:"object__row_link",to:"/".concat(I(e),"/").concat(S(t.url))},t[function(e){return"films"===e?"title":"name"}(e)])}))))})))))},R=Object(o.b)((function(e){return{objectName:N(e),objectData:D(e),error:g(e),isLoading:A(e),addData:y(e)}}),(function(e){return{loadObject:function(t,a){return e((n=t,r=a,function(e){e({type:"START_LOADING"}),fetch("https://swapi.co/api/".concat(n,"/").concat(r)).then((function(e){return e.json()})).then((function(t){e({type:"SAVE_OBJECT_NAME",payload:n}),e(function(e){return{type:"SAVE_OBJECT",payload:e}}(t))})).catch((function(t){return e(m(t.message))})).finally((function(){return e({type:"STOP_LOADING"})}))}));var n,r},loadAddData:function(t,a,n){return e(function(e,t,a){return function(t){t({type:"START_LOADING"});var n=function(n){"string"===typeof e[a[n]]&&(e[a[n]]=[e[a[n]]]);var r=e[a[n]].map((function(e){return fetch(e).then((function(e){return e.json()}))}));Promise.all(r).then((function(e){var r={};r[a[n]]=e,t({type:"SAVE_OBJECT_ADDITIONAL_DATA",payload:r})}))};for(var r in a)n(r);t({type:"STOP_LOADING"})}}(t,0,n))},clearStateData:function(){return e({type:"CLEAR_STATE"})}}}))(C);C.defaultProps={error:null,isLoading:!1};var k=function(e){var t=e.filmsData,a=e.error,c=e.isLoading,l=e.loadFilms,o=e.match,i=Object(h.g)(),s=Object(h.h)(),u=new URLSearchParams(s.search),m=u.get("query"),d=u.get("sortOrder");Object(n.useEffect)((function(){t.length||l()}),[l]);var p=m?t.filter((function(e){return e.title.toLowerCase().includes(m.trim().toLowerCase())||e.episode_id===+m.trim()})):t,f=function(e){return e.sort((function(e,t){return e.title.localeCompare(t.title)}))},_=Object(b.a)(p);"asc"===d&&(_=f(_)),"desc"===d&&(_=f(_).reverse());var E=o.params.id;return r.a.createElement("div",{className:"main"},r.a.createElement("h1",{className:"main__header"},"Star Wars"),c&&r.a.createElement(T,null),a&&r.a.createElement(L,{message:a}),E&&!a&&!c&&r.a.createElement(R,null),!a&&!c&&!E&&r.a.createElement("div",null,r.a.createElement("div",{className:"bar"},r.a.createElement("input",{type:"search",placeholder:"Search...",value:m,onChange:function(e){return t=e.target.value,u.set("query",t),void(t?i.push({search:u.toString()}):(u.delete("query"),i.push({search:u.toString()})));var t},className:"bar__input"}),r.a.createElement("div",{className:"bar__sort",onClick:function(){return d&&"desc"!==d?u.set("sortOrder","desc"):u.set("sortOrder","asc"),void i.push({search:u.toString()})}},"Sort by name")),r.a.createElement("div",{className:"films"},_.map((function(e){return r.a.createElement("div",{key:e.episode_id,className:"films__card",onClick:function(){return t=S(e.url),void i.push({pathname:"".concat(o.url,"/").concat(t),search:s.search});var t}},r.a.createElement("p",{className:"films__card_title"},e.title),r.a.createElement("p",null,"Episode ",e.episode_id))})))))},G=Object(o.b)((function(e){return{filmsData:O(e),error:g(e),isLoading:A(e)}}),(function(e){return{loadFilms:function(t){return e((function(e){e({type:"START_LOADING"}),fetch("https://swapi.co/api/films/").then((function(e){return e.json()})).then((function(t){var a=t.results;e({type:"SAVE_FILMS",payload:a})})).catch((function(t){return e(m(t.message))})).finally((function(){return e({type:"STOP_LOADING"})}))}))}}}))(k);k.defaultProps={filmsData:[],error:null,isLoading:!1};a(41);var P=function(){return r.a.createElement(h.d,null,r.a.createElement(h.a,{exact:!0,from:"/",to:"/films"},"Start"),r.a.createElement(h.b,{path:"/films",exact:!0,component:G}),r.a.createElement(h.b,{path:"/:objname/:id?",component:R}))};l.a.render(r.a.createElement(o.a,{store:_},r.a.createElement(E.a,null,r.a.createElement(P,null))),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.c32477b3.chunk.js.map